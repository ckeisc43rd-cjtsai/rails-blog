<div class="max-w-4xl mx-auto px-4 py-6">
    <h1 class="text-6xl font-bold mb-6 text-center text-gray-100">Blog Posts</h1>
    
    <% if user_signed_in? %>
      <div class="text-center mb-6">
        <%= button_to "New Post", new_blog_post_path, method: :get, class: "bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-blue-500 transition" %>
      </div>
    <% end %>
    
    <% @blog_posts.reverse_each do |blog_post| %>
      <div class="mb-8 p-6 bg-gray-800 rounded-lg shadow-md border border-gray-700">
        <h2 class="text-4xl font-semibold mb-2 underline">
          <%= link_to blog_post.title, blog_post, class: "hover:text-blue-400 transition" %>
        </h2>
        <p class="text-gray-400 mb-4">
          Author: <%= blog_post.user.username %>
        </p>
        <p class="mb-4 text-gray-100">
          <%= markdown_no_html(blog_post.body[0, 50]) %>
          <%= markdown("...") if blog_post.body.length > 50 %>
        </p>
        
        <% if blog_post.comments.present? %>
          <div class="mt-4 p-4 bg-gray-700 rounded border border-gray-600">
            <h3 class="text-2xl font-semibold mb-2 text-gray-100">Comments</h3>
            <% blog_post.comments.each do |comment| %>
              <div class="mb-2">
                <span class="font-bold text-gray-300"><%= comment.user.username %>:</span>
                <span class="text-gray-200">
                  <%= markdown_no_script("- "+comment.text[0, 50]+["","..."][comment.text.length>50?1:0]) %>
                </span>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
    <% end %>
  </div>
